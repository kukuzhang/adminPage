webpackJsonp([16],{"6i3e":function(e,t,a){function n(e){s||a("uoLI")}var s=!1,i=a("VU/8")(a("w2oq"),a("DeHd"),n,null,null);i.options.__file="E:\\gitee\\adminPage\\src\\views\\member\\info.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),i.options.functional,e.exports=i.exports},DeHd:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isGettingInfo,expression:"isGettingInfo",modifiers:{body:!0}}],staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"36px"}},[e._v("会员信息")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"edit",size:"mini"},on:{click:function(t){e.edit()}}})],1),e._v(" "),a("div",{staticClass:"text item"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{sm:16}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("姓名: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.name||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("性别: ")]),e._v(" "),a("span",[e._v(e._s(1===e.memberInfo.sex?"男":"女"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("电话: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.mobile||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("微信: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.wechat_code||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("生日: ")]),e._v(" "),a("span",[e._v(e._s(e.formatDateTime(e.memberInfo.birthday)||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("身份证号: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.id_card||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("家庭地址: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.home_address||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("工作住址: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.work_address||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("来源: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.referer||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("销售: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.sale_staff||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("教练: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.coach_staff||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("备注: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.remark||"未设置"))])])],1)],1),e._v(" "),a("el-col",{attrs:{sm:8}},[a("div",{staticClass:"grid-content user-photo"},[e.memberInfo.photo?a("img",{attrs:{src:e.memberInfo.photo}}):a("span",[e._v("该会员暂无图片")])])])],1)],1)]),e._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"36px"}},[e._v("会员卡")]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.xuka()}}},[e._v("续")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.tingka()}}},[e._v("停")])],1)]),e._v(" "),a("div",{staticClass:"item"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("会员卡类型: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.card_type_name+(2===e.memberInfo.card_type?" / 剩余"+e.memberInfo.card_use_num+"次":"")||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("卡片有效期: ")]),e._v(" "),a("span",[e._v(e._s(e.formatDateTime(e.memberInfo.card_start_time)+"至"+e.formatDateTime(e.memberInfo.card_end_time)+" "+e.cardEndTime(e.memberInfo.card_end_time)||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("绑定会员卡物理ID: ")]),e._v(" "),a("span",[e._v(e._s(e.memberInfo.card_id||"未设置"))])]),e._v(" "),a("el-col",{staticClass:"info-item",attrs:{sm:12}},[a("label",[e._v("所属场地: ")]),e._v(" "),a("span",[e._v(e._s(1===e.memberInfo.store_id?"英威尔海德店":"英威尔龙珠店"))])])],1),e._v(" "),a("div",{staticClass:"card-log"},[a("div",{staticClass:"title"},[e._v("近期变动")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cardLog,stripe:""}},[a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?a("span",{staticClass:"log-type xuka"},[e._v("续卡")]):e._e(),e._v(" "),2===t.row.type?a("span",{staticClass:"log-type tingka"},[e._v("停卡")]):e._e(),e._v(" "),3===t.row.type?a("span",{staticClass:"log-type kaika"},[e._v("开卡")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatDetail(t.row)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"变动时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.moment(1e3*t.row.add_time).format("YYYY-MM-DD HH:mm")))])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10],"page-size":e.size,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t}}})],1)],1)],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},LMTA:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.el-col {\n  border-radius: 4px;\n}\n.bg-purple-dark {\n  background: #99a9bf;\n}\n.bg-purple {\n  background: #d3dce6;\n}\n.bg-purple-light {\n  background: #e5e9f2;\n}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.info-item {\n  font-size: 14px;\n  padding: 5px 0;\n  line-height: 20px;\n}\n.info-item label {\n  color: #97a8be;\n  font-size: 14px;\n}\n.el-card {\n  margin: 20px 0;\n}\n.el-card:last-of-type {\n    margin-bottom: 0;\n}\n.el-card:first-of-type {\n    margin-top: 0;\n}\n.user-photo {\n  text-align: center;\n  font-size: 14px;\n}\n.user-photo img {\n  max-width: 100%;\n  max-height: 300px;\n  box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.1);\n}\n.card-log {\n  margin-top: 15px;\n}\n.card-log .title {\n    font-size: 14px;\n    line-height: 30px;\n    color: #97a8be;\n}\n.card-log .log-type {\n    display: inline-block;\n    font-size: 0.75rem;\n    line-height: 1;\n    color: #fff !important;\n    padding: 2px 5px;\n    border-radius: 3px;\n}\n.card-log .log-type.xuka {\n      background: #1d8ce0;\n}\n.card-log .log-type.tingka {\n      background: #ff4949;\n}\n.card-log .log-type.kaika {\n      background: #13ce66;\n}\n.card-log .el-pagination {\n    margin-top: 5px;\n}\n@media (min-width: 768px) {\n.card-log .log-item {\n    border-bottom: none;\n}\n.card-log .log-item:nth-of-type(odd) {\n      border-right: 1px dashed #d1dbe5;\n}\n}\n",""])},uoLI:function(e,t,a){var n=a("LMTA");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("581fc6f2",n,!1)},w2oq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("ocgh"),o=a("NYxO"),r=a("YaEn"),l=a("0xDb");t.default={data:function(){return{cardLog:null,listLoading:!1,total:null,page:1,size:10}},computed:s()({},a.i(o.b)(["memberInfo","isGettingInfo"]),{cardLogParams:function(){return{mobile:this.memberInfo.mobile,offset:"0,10",type:""}}}),watch:{memberInfo:function(){this.getCardLog()}},created:function(){var e={mobile:"",id:this.$route.params.id};this.memberInfo?this.getCardLog():this.getMemberInfo(e)},methods:s()({},a.i(o.d)({getMemberInfo:"member/getInfo"}),a.i(o.e)({setMemberInfo:"member/setInfo"}),{msg:function(){this.$message("该功能正在开发！")},edit:function(){this.setMemberInfo(this.memberInfo),r.a.push({name:"修改会员资料",params:{id:this.memberInfo.id}})},xuka:function(){r.a.push({name:"会员卡续卡",params:{id:this.memberInfo.id}})},tingka:function(){r.a.push({name:"会员卡停卡",params:{id:this.memberInfo.id}})},formatDateTime:function(e){return a.i(l.a)(e)},cardEndTime:function(e){var t=Math.round((new Date).getTime()/1e3),a=Math.round((e-t)/86400);return a>=0?"还有"+a+"天到期":"已到期"},getCardLog:function(){var e=this;this.listLoading=!0,a.i(i.h)(this.cardLogParams).then(function(t){e.cardLog=t.data.list,e.total=t.data.total,e.listLoading=!1})},formatDetail:function(e){var t=void 0;switch(e.type){case 1:t="续卡"+e.detail.day+"天";break;case 2:t="停卡 "+this.moment(1e3*e.detail.stop_start_time).format("YYYY-MM-DD")+" 至 "+this.moment(1e3*e.detail.stop_end_time).format("YYYY-MM-DD");break;case 3:t="开卡";break;default:t="开卡"}return t},handleSizeChange:function(e){this.size=e,this.cardLogParams.offset=(this.page-1)*this.size+","+this.size,this.getCardLog()},handleCurrentChange:function(e){this.page=e,this.cardLogParams.offset=(this.page-1)*this.size+","+this.size,this.getCardLog()}})}}});
//# sourceMappingURL=16.46b87bd3e1d2b92c8eee.js.map